# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ Render Configuration - Sequential Pipeline with Cycle Pattern
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# 
# Cycle Pattern: Main â†’ Main â†’ Broadcast â†’ repeat
# Main Cycle: Scraping â†’ Clustering â†’ Reports â†’ Social â†’ Images â†’ Audio â†’ Social Images â†’ Reels â†’ Publishing
# Broadcast Cycle: Newsletter & Digest Generation
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

services:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ğŸ¯ Full Pipeline Worker Service (Complete Automation)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - type: worker
    name: automation-pipeline-worker
    
    # âš ï¸ Ù…Ù‡Ù…: env Ù…Ø´ runtime
    env: docker
    
    # âš ï¸ Ù…Ù‡Ù…: Ø§Ø³ØªØ®Ø¯Ù… Dockerfile.worker
    dockerfilePath: ./backend/Dockerfile.worker
    dockerContext: ./backend
    
    # Plan
    plan: standard
    
    # Region - Ù†ÙØ³ Ù…Ù†Ø·Ù‚Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    region: oregon
    
    # Instance count
    numInstances: 1
    
    # Auto-deploy
    autoDeploy: true
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ğŸ” Environment Variables
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    envVars:
      # Database
      - key: DB_NAME
        value: automation_db_mbly
      - key: DB_USER
        value: automation_db_mbly_user
      - key: DB_PASSWORD
        sync: false
      - key: DB_HOST
        value: dpg-d4co200dl3ps73bk1ufg-a.oregon-postgres.render.com
      - key: DB_PORT
        value: "5432"
      
      # Gemini AI
      - key: GEMINI_API_KEY
        sync: false
      - key: GEMINI_MODEL
        value: gemini-2.5-flash
      - key: GEMINI_IMAGE_MODEL
        value: gemini-2.5-flash-image
      - key: GEMINI_EXTRACTION_MODEL
        value: gemini-2.5-flash-lite
      
      # Application
      - key: ENVIRONMENT
        value: production
      - key: DEBUG
        value: "False"
      - key: LOG_LEVEL
        value: INFO
      - key: SECRET_KEY
        sync: false
      
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      # ğŸ¯ Full Pipeline Worker Configuration
      # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
      - key: WORKER_TYPE
        value: full
      - key: MAX_PARALLEL_JOBS
        value: "3"
      - key: DEFAULT_JOB_TIMEOUT
        value: "300"
      - key: ENABLE_JOB_TIMEOUTS
        value: "true"
      - key: ENABLE_PARALLEL_EXECUTION
        value: "true"
      - key: BROADCAST_MODE
        value: "unified"
      - key: CYCLE_INTERVAL
        value: "120"
      - key: REEL_BATCH_SIZE
        value: "4"
      - key: IMAGE_BATCH_SIZE
        value: "4"
      - key: MAX_REPORTS_PER_PUBLISH
        value: "3"
      - key: MAX_SOCIAL_IMAGES_PER_RUN
        value: "4"
      - key: MAX_REELS_PER_RUN
        value: "4"
      
      # Font and Arabic support
      - key: FONTCONFIG_PATH
        value: /etc/fonts
      - key: FC_LANG
        value: ar
      
      # Job-specific timeouts (optimized for Arabic processing)
      - key: SCRAPING_TIMEOUT
        value: "600"
      - key: CLUSTERING_TIMEOUT
        value: "180"
      - key: REPORTS_TIMEOUT
        value: "300"
      - key: SOCIAL_MEDIA_TIMEOUT
        value: "300"
      - key: IMAGES_TIMEOUT
        value: "600"
      - key: AUDIO_TIMEOUT
        value: "600"
      - key: VIDEO_TIMEOUT
        value: "900"
      - key: PUBLISHING_TIMEOUT
        value: "300"
      - key: BROADCAST_TIMEOUT
        value: "600"
      
      # AWS S3
      - key: AWS_ACCESS_KEY_ID
        sync: false
      - key: AWS_SECRET_ACCESS_KEY
        sync: false
      - key: AWS_DEFAULT_REGION
        value: us-east-1
      - key: S3_BUCKET_NAME
        value: media-automation-bucket
      
      # S3 Folders
      - key: S3_ORIGINAL_IMAGES_FOLDER
        value: original/images/
      - key: S3_ORIGINAL_VIDEOS_FOLDER
        value: original/videos/
      - key: S3_ORIGINAL_AUDIOS_FOLDER
        value: original/audios/
      - key: S3_GENERATED_IMAGES_FOLDER
        value: generated/images/
      - key: S3_GENERATED_AUDIOS_FOLDER
        value: generated/audios/
      - key: S3_GENERATED_VIDEOS_FOLDER
        value: generated/videos/
      
      # Google Cloud
      - key: GOOGLE_APPLICATION_CREDENTIALS
        value: /app/n8nraghad-7fc0064b9857.json
      - key: GOOGLE_CREDENTIALS_JSON
        sync: false
      
      # Facebook
      - key: FB_GAZA_ACCESS_TOKEN
        sync: false
      - key: FB_GAZA_PAGE_ID
        value: "893918783798150"
      - key: FB_DOT_ACCESS_TOKEN
        sync: false
      - key: FB_DOT_PAGE_ID
        value: "847928151740253"
      
      # Instagram
      - key: IG_GAZA_USER_ID
        value: "17841477381900896"
      - key: FB_gaza_ACCESS_TOKEN
        sync: false
      
      # Telegram
      - key: TG_BOT_TOKEN
        sync: false
      - key: TG_CHAT_ID
        value: "-1003517881817"
      
      # API
      - key: API_BASE_URL
        value: https://news-api-ydc8.onrender.com
      
      # Python/Docker
      - key: PYTHONPATH
        value: /app
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: PLAYWRIGHT_BROWSERS_PATH
        value: /ms-playwright